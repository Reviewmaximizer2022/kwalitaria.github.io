!function(t){var e=function(){wp.hooks.addFilter("iconic_wds_is_checkout","iconic_wds",function(e){return!!t("body").hasClass("checkout-wc")||e})},s=function(){t("body").on("viwcaio_sc_effect_after_atc",function(){window.jckwds.cache(),window.jckwds.toggle_date_time_fields()}),wp.hooks.addFilter("iconic_wds_is_checkout","iconic_wds",function(e){return 0<t("body").find(".vi-wcaio-checkout-step-wrap").length||e})};t(document).ready(e),t(document).ready(s)}(jQuery),function(a,i){window.jckwds={cache:function(){jckwds.els={},jckwds.els.document=a(i),jckwds.els.document_body=a(i.body),jckwds.els.date_picker=a("#jckwds-delivery-date"),jckwds.els.date_ymd=a("#jckwds-delivery-date-ymd"),jckwds.els.timeslot_select=a("#jckwds-delivery-time"),jckwds.els.timeslot_select_wrapper=a("#jckwds-delivery-time-wrapper"),jckwds.els.timeslot_field_row=a("#jckwds-delivery-time_field"),jckwds.els.checkout_fields=a("#jckwds-fields"),jckwds.els.fields_hidden=a('[name="iconic-wds-fields-hidden"]'),jckwds.els.ship_to_different_address_checkbox=a("#ship-to-different-address-checkbox"),jckwds.els.shipping_postcode_field=a("#shipping_postcode"),jckwds.els.billing_postcode_field=a("#billing_postcode"),jckwds.els.multi_step_checkout=a("#wizard")},common_vars:function(){jckwds.vars={},jckwds.vars.is_checkout=wp.hooks.applyFilters("iconic_wds_is_checkout",jckwds.els.document_body.hasClass("woocommerce-checkout")),jckwds.vars.has_multi_step=0<jckwds.els.multi_step_checkout.length,jckwds.vars.inactive_class="jckwds-fields-inactive",jckwds.vars.chosen_shipping_method=!1,jckwds.vars.set_date_flag=!1,jckwds.vars.wds_ajax_init_flag=!1},on_load:function(){jckwds.cache(),jckwds.common_vars(),jckwds.setup_checkout(),jckwds.setup_multi_step_checkout(),a(jckwds.els.document_body).trigger("iconic_wds_init_tooltip")},setup_checkout:function(){!jckwds.vars.is_checkout||jckwds.vars.has_multi_step||jckwds.vars.is_order_pay||(jckwds.setup_checkout_fields(),jckwds.watch_update_checkout())},setup_multi_step_checkout:function(){a(i.body).on("cfw_updated_checkout",function(){jckwds.cache(),jckwds.unblock_checkout(),a("#jckwds-delivery-date").hasClass("hasDatepicker")||jckwds.setup_date_picker()}),jckwds.vars.is_checkout&&jckwds.vars.has_multi_step&&jckwds.els.multi_step_checkout.init(function(){jckwds.cache(),jckwds.common_vars(),jckwds.setup_checkout_fields(),jckwds.watch_update_checkout()})},setup_checkout_fields:function(){jckwds.setup_date_picker(),jckwds.setup_timeslot_select()},setup_date_picker:function(){jckwds.els.date_picker.datepicker({defaultDate:jckwds_vars.bookable_dates[0],minDate:jckwds_vars.bookable_dates[0],maxDate:jckwds_vars.bookable_dates[jckwds_vars.bookable_dates.length-1],beforeShow:function(e,t){var s=0<=a.inArray(jckwds_vars.settings.datesettings_datesettings_setup_uitheme,["none","dark","light"])?jckwds_vars.settings.datesettings_datesettings_setup_uitheme:"dark";t.dpDiv.addClass("iconic-wds-datepicker iconic-wds-datepicker--"+s),jckwds.els.document_body.trigger("iconic_wds_datepicker_before_show",t)},beforeShowDay:function(e){var t=a.datepicker.formatDate(jckwds_vars.settings.datesettings_datesettings_dateformat,e,{monthNames:jckwds_vars.strings.months,monthNamesShort:jckwds_vars.strings.months_short,dayNames:jckwds_vars.strings.days,dayNamesShort:jckwds_vars.strings.days_short,dayNamesMin:jckwds_vars.strings.days_short}).toString(),s="iconic-wds-date";return jckwds.within_min_max_range(t)&&(s+=" iconic-wds-date--tooltip"),jckwds.is_date_available(t)?(t=jckwds.get_fee_for_date(e),(e=parseFloat(t.replace(jckwds_vars.currency.symbol,"")))&&(s+=" iconic-wds-date--fee"),[!0,s,e?"+"+t:""]):[!1,s,jckwds_vars.strings.unavailable]},dateFormat:jckwds_vars.settings.datesettings_datesettings_dateformat,onSelect:function(e,t){a(this).trigger("change"),""!==this.value&&(t=[jckwds.pad_left(t.selectedYear,4),jckwds.pad_left(t.selectedMonth+1,2),jckwds.pad_left(t.selectedDay,2)].join(""),jckwds.els.date_ymd.val(t),jckwds.vars.set_date_flag?jckwds.vars.set_date_flag=!1:jckwds.is_true(jckwds_vars.settings.timesettings_timesettings_setup_enable)?jckwds.update_timeslot_options(t):jckwds.els.document_body.trigger("update_checkout"))},onChangeMonthYear:function(){jckwds.els.document_body.trigger("iconic_wds_datepicker_on_change_month_year")},monthNames:jckwds_vars.strings.months,monthNamesShort:jckwds_vars.strings.months_short,dayNames:jckwds_vars.strings.days,dayNamesShort:jckwds_vars.strings.days_short,dayNamesMin:jckwds_vars.strings.days_short,firstDay:jckwds.get_first_day_of_the_week(),duration:0}),a.datepicker.setDefaults(a.datepicker.regional[""]),jckwds.els.date_picker.datepicker(a.datepicker.regional[""]),"1"===jckwds_vars.settings.datesettings_datesettings_setup_auto_select_first&&jckwds_vars.bookable_dates.length&&jckwds.set_date(jckwds_vars.bookable_dates[0],!0),a(".ui-datepicker").addClass("notranslate")},is_true:function(e){return!(!e||0===e||"0"===e||""===e||e.length<=0)},get_fee_for_date:function(e){var t=e.getDay(),e=a.datepicker.formatDate(jckwds_vars.settings.datesettings_datesettings_dateformat,e,{monthNames:jckwds_vars.strings.months,monthNamesShort:jckwds_vars.strings.months_short,dayNames:jckwds_vars.strings.days,dayNamesShort:jckwds_vars.strings.days_short,dayNamesMin:jckwds_vars.strings.days_short}).toString(),s=e.replace(/\//g,""),s=void 0!==jckwds_vars.day_fees[s]?parseFloat(jckwds_vars.day_fees[s]):parseFloat(jckwds_vars.day_fees[t]);return e===jckwds_vars.dates.same_day&&0<jckwds_vars.settings.datesettings_fees_same_day.length&&(s+=parseFloat(jckwds_vars.settings.datesettings_fees_same_day)),e===jckwds_vars.dates.next_day&&0<jckwds_vars.settings.datesettings_fees_next_day.length&&(s+=parseFloat(jckwds_vars.settings.datesettings_fees_next_day)),!isNaN(s)&&accounting.formatMoney(s,jckwds_vars.currency)},set_date:function(e,t){if(e.length<=0||!jckwds.is_date_available(e,!1))return jckwds.els.date_picker.blur().datepicker("hide").datepicker("setDate",null),jckwds.els.date_ymd.val(""),void jckwds.clear_timeslots(jckwds_vars.strings.selectdate);t=void 0!==t&&t,jckwds.vars.set_date_flag=!t,e=a.datepicker.parseDate(jckwds_vars.settings.datesettings_datesettings_dateformat,e,{monthNames:jckwds_vars.strings.months,monthNamesShort:jckwds_vars.strings.months_short,dayNames:jckwds_vars.strings.days,dayNamesShort:jckwds_vars.strings.days_short,dayNamesMin:jckwds_vars.strings.days_short}),jckwds.els.date_picker.blur().datepicker("hide").datepicker("setDate",e),a(".ui-datepicker .ui-state-active").click()},is_date_available:function(s){if(jckwds_vars.bookable_dates.length<=0||"1"===jckwds_vars.has_date_conflict)return!1;var i=!1;return s=s.toLowerCase(),a.each(jckwds_vars.bookable_dates,function(e,t){if(!1===i&&t.toLowerCase()===s)return!(i=!0)}),i},update_timeslot_options:function(e,t){var s=jckwds.els.timeslot_select.find("option:eq(0)"),i=jckwds.els.timeslot_select.val(),d=(jckwds.els.ship_to_different_address_checkbox.is(":checked")?a("#shipping_postcode"):a("#billing_postcode")).val(),e=(jckwds.clear_timeslots(jckwds_vars.strings.loading),jckwds.els.timeslot_select.attr("disabled","disabled").trigger("change",["update_timeslots"]),{action:"iconic_wds_get_slots_on_date",nonce:jckwds_vars.ajax_nonce,date:e,postcode:d});jQuery.post(jckwds_vars.ajax_url,e,function(e){!0===e.success?(jckwds.clear_timeslots(jckwds_vars.strings.selectslot),jckwds.els.timeslot_select.append(e.html),i=0<jckwds.els.timeslot_select.find('option[value="'+i+'"]').length?i:0,jckwds.els.timeslot_select.val(i),e.reservation?0<jckwds.els.timeslot_select.find("option[value='"+e.reservation+"']").length&&jckwds.els.timeslot_select.val(e.reservation):"1"===jckwds_vars.settings.timesettings_timesettings_setup_auto_select_first&&jckwds.els.timeslot_select.val(jckwds.els.timeslot_select.find("option:eq(1)").val()),jckwds.els.document_body.trigger("update_checkout")):s.text(jckwds_vars.strings.noslots),jckwds.els.document_body.trigger("timeslots_loaded"),jckwds.els.timeslot_select.removeAttr("disabled").trigger("change",["update_timeslots"]),void 0!==t&&t(e)})},refresh_timeslots:function(e){e=void 0!==e&&e,jckwds.els.timeslot_field_row.hasClass("jckwds-delivery-time--has-reservation")&&!1===e?jckwds.els.timeslot_field_row.removeClass("jckwds-delivery-time--has-reservation"):(e=jckwds.els.date_ymd.val(),jckwds.is_true(e)&&jckwds.is_true(jckwds_vars.settings.timesettings_timesettings_setup_enable)&&jckwds.update_timeslot_options(e),jckwds.els.document_body.trigger("timeslots_refreshed"))},clear_date:function(){jckwds.els.date_ymd.val(""),jckwds.set_date("")},clear_timeslots:function(e){jckwds.els.timeslot_select.children().not(":first").remove(),"string"==typeof e&&jckwds.els.timeslot_select.find("option:eq(0)").text(e)},setup_timeslot_select:function(){jckwds.els.timeslot_select.on("change",function(e,t){"update_timeslots"!==(t=void 0!==t&&t)&&jckwds.els.document_body.trigger("update_checkout")})},watch_update_checkout:function(){jckwds.els.document_body.on("update_checkout",function(e){jckwds.block_checkout()}),jckwds.els.document_body.on("updated_checkout",function(e,t){if(t&&t.fragments&&t.fragments.iconic_wds){if(jckwds.cache(),a("#jckwds-delivery-date").hasClass("hasDatepicker")||jckwds.setup_date_picker(),jQuery.fn.select2&&a("#jckwds-delivery-time").hasClass("select2-hidden-accessible")&&(jQuery("#jckwds-delivery-time").select2("destroy"),jQuery("#jckwds-delivery-time").select2()),jckwds.update_checkout_field_labels(t.fragments.iconic_wds.labels),t.fragments.iconic_wds.chosen_shipping_method===jckwds.vars.chosen_shipping_method)return t.fragments.iconic_wds&&t.fragments.iconic_wds.slots_allowed&&!jckwds.vars.wds_ajax_init_flag&&(jckwds.vars.wds_ajax_init_flag=!0,jckwds.cache(),jckwds.show_date_time_fields()),void jckwds.unblock_checkout();jckwds.vars.chosen_shipping_method=t.fragments.iconic_wds.chosen_shipping_method.toString(),jckwds.toggle_date_time_fields(t.fragments.iconic_wds,function(e){e&&jckwds.refresh_datepicker(t.fragments.iconic_wds.bookable_dates,function(){jckwds.refresh_timeslots(!0)}),jckwds.unblock_checkout()});var s=a("form.checkout [name=woocommerce_checkout_place_order]");0===t.fragments.iconic_wds.bookable_dates.length?(a(".iconic-wds-fields__error").show(),a(".iconic-wds-fields__fields").hide(),s.prop("disabled",!0),a("#ppc-button").hide()):(a(".iconic-wds-fields__error").hide(),a(".iconic-wds-fields__fields").show(),s.prop("disabled",!1),a("#ppc-button").show())}}),jckwds.els.checkout_fields.hasClass(jckwds.vars.inactive_class)&&jckwds.hide_date_time_fields()},block_checkout:function(){jckwds.els.checkout_fields.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),a("#place_order").attr("disabled","disabled")},unblock_checkout:function(){jckwds.els.checkout_fields.unblock({fadeOut:0}),a("#place_order").removeAttr("disabled")},update_checkout_field_labels:function(e){var i;e.length<=0||(i={details:a(".iconic-wds-fields__title"),date:a(".jckwds-delivery-date label"),select_date:a("#jckwds-delivery-date"),choose_date:a("#jckwds-delivery-date-description"),time_slot:a(".jckwds-delivery-time label"),choose_time_slot:a(" #jckwds-delivery-time-description")},a.each(e,function(e,t){if(void 0===i[e])return!0;if(i[e].is("input"))return i[e].attr("placeholder",t),!0;var s=i[e].find("*");i[e].text(t),0<s.length&&i[e].append("&nbsp;").append(s)}))},refresh_datepicker:function(e,t){jckwds_vars.bookable_dates=e,jckwds.els.date_picker.blur().datepicker("hide").datepicker("option","defaultDate",e[0]).datepicker("option","minDate",e[0]).datepicker("option","maxDate",e[e.length-1]),jckwds_vars.reserved_slot?-1!==a.inArray(jckwds_vars.reserved_slot.date.formatted,jckwds_vars.bookable_dates)&&jckwds.set_date(jckwds_vars.reserved_slot.date.formatted):(e=jckwds.els.date_picker.val(),jckwds.set_date(e)),void 0!==t&&t()},clear_date_time_fields:function(){jckwds.clear_date(),jckwds.clear_timeslots()},toggle_date_time_fields:function(e,t){if(!jckwds_vars.needs_shipping||a.inArray("any",jckwds_vars.settings.general_setup_shipping_methods)<0&&a.inArray(jckwds.vars.chosen_shipping_method,jckwds_vars.settings.general_setup_shipping_methods)<0)return jckwds.hide_date_time_fields(),void("function"==typeof t&&t(!1,{index:!0}));jckwds.show_date_time_fields(),e.slots_allowed?jckwds.show_date_time_fields():jckwds.hide_date_time_fields(),"function"==typeof t&&t(e.slots_allowed)},hide_date_time_fields:function(){jckwds.els.checkout_fields.removeClass(jckwds.vars.inactive_class).removeClass("woocommerce-billing-fields").hide(),jckwds.els.fields_hidden.val(1),jckwds.clear_date_time_fields()},show_date_time_fields:function(){jckwds.els.checkout_fields.addClass("woocommerce-billing-fields").show(),jckwds.els.fields_hidden.val(0)},get_last_day_of_the_week:function(){var e={monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6,sunday:0};return void 0===jckwds_vars.settings.datesettings_datesettings_last_day_of_week||void 0===e[jckwds_vars.settings.datesettings_datesettings_last_day_of_week]?6:e[jckwds_vars.settings.datesettings_datesettings_last_day_of_week]},get_first_day_of_the_week:function(){var e=jckwds.get_last_day_of_the_week();return 6===e?0:e+1},pad_left:function(e,t,s){return new Array(t-String(e).length+1).join(s||"0")+e},checkout_error:function(){var e=a('[data-iconic-wds-clear-date="1"]'),t=a('[data-iconic-wds-clear-time="1"]'),s=a('[data-iconic-wds-update-checkout="1"]');e.length<=0&&t.length<=0&&s.length<=0||(0<e.length&&jckwds.clear_date(),0<t.length&&jckwds.refresh_timeslots(!0),0<s.length&&a(i.body).trigger("update_checkout"))},submit_error:function(e){var t=a("form.checkout");a(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),t.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+e+"</div>"),t.removeClass("processing").unblock(),t.find(".input-text, select, input:checkbox").trigger("validate").blur(),a(i.body).trigger("checkout_error",[e])},within_min_max_range:function(e){return jckwds_vars.bookable_dates.includes(e)}},a(window).on("load",jckwds.on_load),a(i.body).on("checkout_error",jckwds.checkout_error)}(jQuery,document),jQuery(function(){var s;jQuery("#wds-reservation-table").length&&(s=new Vue,window.iconic_wds_reservation_table=new Vue({el:"#wds-reservation-table",data:{page_loaded:!1,shipping_methods:[],selected_shipping_method:"",available_timeslots:{},available_dates:[],selected_date:"",selected_date_timeslots:[],selected_slot:"",shipping_method_type:"Delivery",datetime_required_for_selected_method:!0,shipping_method_provided_as_shortcode_arg:!1,address:{country:"",state:"",city:"",postcode:""},timeslot_enabled:!1,remaining_label_threshold:!1,step1:{caption:"",form_open:!1,data_available:!0,none_caption:jckwds_vars.strings.reservation_table.none_selected},step2:{caption:"",form_open:!1,data_available:!1,none_caption:jckwds_vars.strings.reservation_table.none_selected},step3:{caption:"",form_open:!1,data_available:!1,none_caption:jckwds_vars.strings.reservation_table.none_selected},strings:{free:jckwds_vars.strings.reservation_table.free}},mounted:function(){this.page_loaded=!0,this.timeslot_enabled="1"===jckwds_vars.settings.timesettings_timesettings_setup_enable,this.remaining_label_threshold=parseInt(jckwds_vars.settings.reservations_reservations_remaining_label_threshold),jckwds_vars.shipping&&(this.shipping_methods=jckwds_vars.shipping.shipping_methods,this.step1.caption=jckwds_vars.shipping.formatted_destination,this.selected_shipping_method=jckwds_vars.shipping.selected_shipping_method),($parent=jQuery(this.$el).parent()).data("shipping-method")&&(this.shipping_method_provided_as_shortcode_arg=$parent.data("shipping-method"),this.selected_shipping_method=$parent.data("shipping-method")),this.selected_shipping_method&&(this.step3.form_open=!0,this.selected_date=jckwds_vars.reserved_slot.ymd||"",Vue.nextTick(()=>{jckwds_vars.reserved_slot.id?(this.selected_slot=jckwds_vars.reserved_slot.id,this.fetch_dates(this.selected_date,!1)):this.fetch_dates(),this.step3.caption=jckwds_vars.reserved_slot.string}))},methods:{open_form:function(e){var t=this["step"+e];t.form_open=!t.form_open,3===e&&0===this.available_dates.length&&this.fetch_dates(),t.form_open&&s.$emit("open_step",e)},btn_text:function(e){e=this["step"+e];return e.form_open?window.jckwds_vars.strings.reservation_table.cancel:""===e.caption?window.jckwds_vars.strings.reservation_table.add:window.jckwds_vars.strings.reservation_table.edit},has_grey_bg:function(e){e=this["step"+e];return!e.form_open&&""===e.caption},fetch_shipping_methods:function(){var e={action:"iconic_wds_get_address_shipping_methods",calc_shipping_country:this.address.country,calc_shipping_state:this.address.state,calc_shipping_city:this.address.city,calc_shipping_postcode:this.address.postcode,nonce:window.jckwds_vars.ajax_nonce},t=this;t.block(),jQuery.post(window.jckwds_vars.ajax_url,e,function(e){e.success?(t.open_step(2),t.shipping_methods=e.data.shipping_methods,t.step1.caption=e.data.formatted_destination,t.selected_shipping_method="",t.available_dates=[],t.available_timeslots={},e.data.new_nonce&&(window.jckwds_vars.ajax_nonce=e.data.new_nonce),1===(e=Object.keys(t.shipping_methods)).length&&(t.selected_shipping_method=e[0],Vue.nextTick(()=>{t.fetch_dates()}))):alert(jckwds_vars.strings.reservation_table.no_shiping_methods)}).always(function(){t.unblock()})},handle_fetch_dates_button_click:function(){this.available_dates=[],this.available_timeslots={},this.selected_date_timeslots=[],this.fetch_dates(null,!0,!0)},fetch_dates:function(s,i,d){var e={action:"iconic_wds_get_reservation_table_data",shipping_method:this.selected_shipping_method,nonce:window.jckwds_vars.ajax_nonce},a=("string"==typeof s&&(e.ymd=s),void 0===i&&(i=!0),this);a.block(),jQuery.post(window.jckwds_vars.ajax_url,e,function(e){if(e.success){if(a.available_dates=e.data.dates,!1===e.data.datetime_required_for_selected_method)return a.step3.caption=e.data.message,a.step3.form_open=!1,a.step2.form_open=!1,void(a.datetime_required_for_selected_method=!1);if(a.datetime_required_for_selected_method=!0,a.available_dates&&0!==a.available_dates.length){for(var t in i?a.open_step(3):a.open_step(-1),e.data.timeslots)a.$set(a.available_timeslots,t,e.data.timeslots[t]);"string"==typeof s&&(a.selected_date_timeslots=a.available_timeslots[a.selected_date]),a.shipping_method_type=e.data.shipping_method_type,a.selected_date&&a.available_timeslots[a.selected_date]&&(a.selected_date_timeslots=a.available_timeslots[a.selected_date]),d&&Vue.nextTick(function(){jQuery("html, body").animate({scrollTop:jQuery(".wds-reservation-table__step--datetime").offset().top-50},600)}),jQuery(document.body).trigger("iconic_wds_reservation_table_dates_fetched",[s,i])}else alert(e.data.message)}}).always(function(){a.unblock()})},handle_select_date:function(e){void 0===this.available_timeslots[e.ymd]&&this.fetch_dates(e.ymd),this.selected_slot=null,this.selected_date_timeslots=this.available_timeslots[e.ymd],this.selected_date=e.ymd},select_slot:function(e){0<e.slots_available_count&&(this.selected_slot=e.slot_id)},reserve_slot:function(){var e={action:"iconic_wds_reserve_slot",nonce:window.jckwds_vars.ajax_nonce,timeslot_enabled:this.timeslot_enabled,slot_id:this.timeslot_enabled?this.selected_timeslot_obj.slot_id:"",slot_start_time:this.timeslot_enabled?this.selected_timeslot_obj.timefrom.stripped:"",slot_end_time:this.timeslot_enabled?this.selected_timeslot_obj.timeto.stripped:"",slot_date:this.selected_date},t=this;t.block(),jQuery.post(window.jckwds_vars.ajax_url,e,function(e){t.unblock(),e.success?(jQuery(document.body).trigger("iconic_wds_reservation_added",e),jQuery("html, body").animate({scrollTop:jQuery(".wds-reservation-table-wrapper").offset().top-50},600),jckwds_vars.settings.reservations_reservations_redirect_url&&(window.location.href=jckwds_vars.settings.reservations_reservations_redirect_url),t.step3.form_open=!1):e.data.message&&alert(e.data.message)}).fail(function(){alert(window.jckwds_vars.strings.reservation_table.cant_book_slot),t.unblock()})},handle_address_changed:function(e){this.address.country=e.country,this.address.state=e.state,this.address.city=e.city,this.address.postcode=e.postcode},is_earliest_slot:function(e){var t=this.available_dates.findIndex(e=>e.ymd===this.selected_date);return 0===e&&0===t},block:function(){jQuery("#wds-reservation-table").block({message:null,overlayCSS:{opacity:.6}})},unblock:function(){jQuery("#wds-reservation-table").unblock()},open_step:function(e){for(var t=1;t<=3;t++)this["step"+t].form_open=t==e},decode_entities:function(e){return window.wp&&window.wp.htmlEntities?window.wp.htmlEntities.decodeEntities(e):e}},watch:{selected_shipping_method:function(){this.step2.caption=!!this.shipping_methods[this.selected_shipping_method]&&this.shipping_methods[this.selected_shipping_method].label}},computed:{selected_date_obj:function(){return this.available_dates&&this.available_dates.find(e=>e.ymd===this.selected_date)},selected_timeslot_obj:function(){return this.available_timeslots[this.selected_date]&&this.available_timeslots[this.selected_date].find(e=>e.slot_id===this.selected_slot)},selected_slot_formatted:function(){var e=this.timeslot_enabled?this.selected_date_obj&&this.selected_timeslot_obj?this.selected_date_obj.formatted+" @ "+this.selected_timeslot_obj.formatted:"":this.selected_date_obj?this.selected_date_obj.formatted:"";return this.datetime_required_for_selected_method&&(this.step3.caption=e),e},step3_button_text:function(){var e=jckwds_vars.strings.reservation_table.reserve;return e=this.selected_slot_formatted?e+" - "+this.selected_slot_formatted:e},total_fees:function(){return(this.selected_date_obj&&this.selected_date_obj.fee?parseFloat(this.selected_date_obj.fee):0)+(this.selected_timeslot_obj&&this.selected_timeslot_obj.fee.value?parseFloat(this.selected_timeslot_obj.fee.value):0)},total_fees_formatted:function(){var e=this.total_fees;return e?accounting.formatMoney(e,jckwds_vars.currency):""}}}),Vue.component("wds-address",{name:"wds-address",data:function(){return{button_clicked:!1,available_countries:[],locale:{},states:{},fields:{country:"",state:"",postcode:"",city:""},validation:{country:!0,state:!0,postcode:!0,city:!0},strings:{},locale_default:{}}},mounted:function(){this.strings.select_country=window.jckwds_vars.strings.reservation_table.select_country,this.strings.select_state=window.jckwds_vars.strings.reservation_table.select_state,this.strings.continue=window.jckwds_vars.strings.reservation_table.continue,this.available_countries=jckwds_vars.available_countries;var e=window.wc_address_i18n_params.locale.replace(/&quot;/g,'"'),e=(this.locale=JSON.parse(e),window.wc_country_select_params.countries.replace(/&quot;/g,'"'));this.states=JSON.parse(e),this.locale_default=jckwds_vars.locale_default,this.fields.country=jckwds_vars.address.country,this.fields.state=jckwds_vars.address.state,this.fields.city=jckwds_vars.address.city,this.fields.postcode=jckwds_vars.address.postcode,this.input_changed()},computed:{selected_locale:function(){return this.locale[this.fields.country]}},methods:{is_object_empty:function(e){return 0===Object.keys(e).length},is_postcode_visible:function(){return!(this.selected_locale&&this.selected_locale.postcode&&this.selected_locale.postcode.hidden)||!this.selected_locale.postcode.hidden},is_state_visible:function(){return!(this.selected_locale&&this.selected_locale.state&&this.selected_locale.state.hidden)||!this.selected_locale.state.hidden},is_city_visible:function(){return!(this.selected_locale&&this.selected_locale.city&&this.selected_locale.city.hidden)||!this.selected_locale.city.hidden},country_changed:function(){this.fields.state="",this.fields.city="",this.fields.postcode="",this.input_changed()},input_changed:function(){this.$emit("address_changed",this.fields)},validate:function(){if(this.button_clicked)return this.validation.city=!this.is_city_visible()||!!this.fields.city,this.validation.state=!this.is_state_visible()||!!this.fields.state,this.validation.postcode=!this.is_postcode_visible()||!!this.fields.postcode,this.validation.city&&this.validation.state&&this.validation.postcode},get_label:function(e){return!(!this.selected_locale&&jQuery.isEmptyObject(this.locale_default))&&(this.selected_locale&&this.selected_locale[e]&&this.selected_locale[e].label?this.selected_locale:this.locale_default)[e].label},handle_btn_click:function(){this.button_clicked=!0,this.validate()&&this.$emit("button_clicked",this.fields)}},template:`
			<div class="wds-reservation-step-address" v-if="locale">
				<div class="wds-reservation-step-address__inner">
					<div class="wds-reservation-step-address__field" :class="{ 'wds-reservation-step-address__field--error': ! this.validation.country }">
						<label for="wds-reservation-table-address-country">Country</label>
						<select v-model='fields.country' @change="country_changed" id="wds-reservation-table-address-country" class="iconic-wds-dropdown">
							<option value="">{{strings.select_country}}</option>
							<option v-for="(name, code) in available_countries" :value="code" :key="code">{{name}}</option>
						</select>
					</div>
					<div class="wds-reservation-step-address__field" v-show="is_state_visible()"  :class="{ 'wds-reservation-step-address__field--error': ! this.validation.state }">
						<label for="wds-reservation-table-address-state">{{ get_label( 'state' )  }}</label>
						<input
							id="wds-reservation-table-address-state" 
							v-if="'undefined' === typeof states[fields.country]"
							type='text'
							v-model='fields.state'
							@change="validate()"
							>
						<select
							id="wds-reservation-table-address-state"
							class="iconic-wds-dropdown"
							v-if="states[fields.country] && ! is_object_empty( states[fields.country] )"
							v-model='fields.state'
							@change="validate()"
							>
							<option>{{strings.select_state}}</option>
							<option v-for="(state, state_key) in states[fields.country]" :value="state_key" :key="state_key">{{state}}</option>
						</select>
						<input v-if="states[fields.country] && is_object_empty( states[fields.country] )" type='text' @change="input_changed" placeholder="hidden" v-model='fields.state'>
					</div>
					<div class="wds-reservation-step-address__field" v-show="is_city_visible()" :class="{ 'wds-reservation-step-address__field--error': ! this.validation.city }">
						<label for="wds-reservation-table-address-city">{{ get_label( "city" ) }}</label>
						<input type='text' @keyup="validate()" id="wds-reservation-table-address-city"  v-model='fields.city' @change="input_changed">
					</div>
					<div class="wds-reservation-step-address__field" v-show="is_postcode_visible()"  :class="{ 'wds-reservation-step-address__field--error': ! this.validation.postcode }">
						<label for="wds-reservation-table-address-postcode">{{ get_label( "postcode" ) }}</label>
						<input type='text' @keyup="validate()" id="wds-reservation-table-address-postcode" v-model='fields.postcode' @change="input_changed">
					</div>

					</div>
				<button class="wds-reservation-table-button" @click="handle_btn_click">{{strings.continue}}</button>
			</div>
		`}),Vue.component("wds-reservation-date-slider",{name:"wds-reservation-date-slider",components:{slider:vueConciseSlider.slider,slideritem:vueConciseSlider.slideritem},props:["available_dates","initial_selected_date"],data:function(){return{screen_width:0,selected_date:null,right_nav_disabled:!1,left_nav_disabled:!1,slide_styles:{6:{width:"15%","margin-right":"2%"},4:{width:"23%","margin-right":"2%"},3:{width:"31%","margin-right":"3%"}}}},mounted:function(){this.screen_width=jQuery(window).width(),this.selected_date=this.initial_selected_date,s.$on("open_step",this.slide_to_selected_date)},methods:{select_date:function(e){this.selected_date=e.ymd,this.$emit("select_date",e)},slide_next:function(){this.right_nav_disabled||this.$refs.slider.$emit("slideNext")},slide_prev:function(){this.left_nav_disabled||this.$refs.slider.$emit("slidePre")},on_slide:function(e){this.left_nav_disabled=0===e.currentPage,this.right_nav_disabled=e.currentPage>=this.available_dates.length-6},slide_to_selected_date:function(e){3===e&&this.$nextTick(()=>{var e,t=this.available_dates.findIndex(e=>e.ymd===this.selected_date);t<=this.carousel_per_page||(e=this.$refs.slider.data.currentPage,console.log("current_page",e),console.log("selected_date_index",t),console.log("carousel_per_page",this.carousel_per_page),(t<e||t>=e+this.carousel_per_page)&&(page=t-this.carousel_per_page+1,this.$refs.slider.$emit("slideTo",page)))})}},computed:{carousel_per_page:function(){return 800<this.screen_width?6:500<=this.screen_width?4:3}},template:`
			<div class="wds-reservation-table-date-slider">
				<slider 
					:slides-to-scroll="carousel_per_page"
					:currentPage="0"
					ref="slider"
					@slide="on_slide"
					>
					<slideritem v-for="date in available_dates" :key="date.ymd" :style="slide_styles[carousel_per_page]">
						<div class="wds-reservation-table__select-date-date" @click='select_date( date )' :class="{ 'wds-reservation-table__select-date-date--selected': selected_date === date.ymd }" >
							<div class="wds-reservation-table__select-date-date-day">
								{{date.weekday}}
							</div>
							<div class="wds-reservation-table__select-date-date-formatted">
								{{date.header_formatted}}
							</div>
							<div class="wds-reservation-table__select-date-date-fee" v-html="date.fee_formatted"></div>
						</div>
					</slideritem>
				</slider>
				<span v-if="available_dates.length" @click="slide_prev" class='wds-reservation-table-date-slider__nav-next' :class="{ 'wds-reservation-table-date-slider__nav--disabled': left_nav_disabled }">&#xe900;</span>
				<span v-if="available_dates.length" @click="slide_next" class='wds-reservation-table-date-slider__nav-prev' :class="{ 'wds-reservation-table-date-slider__nav--disabled': right_nav_disabled }">&#xe902;</span>
			</div>
		`}))}),function(o){var c={cache:function(){c.cache.vars={tooltip:".iconic-wds-tooltip",arrow:".iconic-wds-tooltip__arrow",anchor:".ui-datepicker .iconic-wds-date--tooltip"}},on_ready:function(){c.cache(),0===o(".iconic-wds-tooltip").length&&(o("body").append('<div class="iconic-wds-tooltip"><div class="iconic-wds-tooltip__inner_wrap"></div><div class="iconic-wds-tooltip__arrow"></div></div>'),o(".iconic-wds-tooltip").hide(),o(".iconic-wds-tooltip").addClass("iconic-wds-tooltip--theme-"+jckwds_vars.settings.datesettings_datesettings_setup_uitheme)),o(window).resize(c.on_resize);var e=c.debounce(c.handle_mouseenter,200),t=c.debounce(c.handle_mouseleave,200);jckwds_vars.is_mobile?(c.mobile_click_handler(),o(window).scroll(c.handle_mouseleave),o(window).on("resize_threshold",c.handle_mouseleave)):(o(document.body).on("mouseenter",c.cache.vars.anchor,e),o(document.body).on("mouseleave",c.cache.vars.anchor,t),o(window).scroll(c.handle_mouseleave).resize(c.handle_mouseleave))},handle_mouseenter:function(){var e,t,s,i,d=o(this).attr("aria-label"),a=o(c.cache.vars.tooltip);d&&(a.find(".iconic-wds-tooltip__inner_wrap").html(d),a.css({left:"",right:""}),d=a.find(c.cache.vars.arrow),t=a.outerWidth(!0),s=(s=(e=(i=o(this).get(0).getBoundingClientRect()).left+i.width/2)-t/2)<0?0:s,o(window).width()<t+s?a.css({left:"",right:0}):a.css({left:s,right:""}),t=a.outerHeight(!0),s=i.top-t,a.css("top",s).show().addClass("iconic-wds-tooltip--animate-opacity iconic-wds-tooltip--animate-top iconic-wds-tooltip--active"),i=a.offset(),d.css("left",e-i.left))},handle_mouseleave:function(){o(c.cache.vars.tooltip).removeClass("iconic-wds-tooltip--animate-top iconic-wds-tooltip--animate-opacity iconic-wds-tooltip--active")},mobile_click_handler:function(){document.addEventListener("click",function(e){var t,s=document.querySelectorAll(c.cache.vars.anchor),i=e.composedPath(),d=!1;for(t in s){var a=s[t];if(i.includes(a)){d=a;break}}d?c.handle_mouseenter.call(d):c.handle_mouseleave()})},debounce:function(i,d,a){var o;return function(){var e=this,t=arguments,s=a&&!o;clearTimeout(o),o=setTimeout(function(){o=null,a||i.apply(e,t)},d),s&&i.apply(e,t)}},remove_title_attribute:function(e,t){window.setTimeout(function(){o(".iconic-wds-datepicker .iconic-wds-date").each(function(){var e=o(this).attr("title");o(this).removeAttr("title"),o(this).attr("aria-label",e)})},100)}};o(document.body).on("iconic_wds_datepicker_before_show iconic_wds_datepicker_on_change_month_year",c.remove_title_attribute),o(document.body).on("iconic_wds_init_tooltip",c.on_ready)}(jQuery);